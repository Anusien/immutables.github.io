---
title: 'Get started!'
layout: page
---

{% capture v %}2.0.21{% endcapture %}
{% capture depUri %}http://search.maven.org/#artifactdetails|org.immutables{% endcapture %}

## Prerequisites

Java 7 or higher is required to run _Immutables_ annotation processor.

Add required dependencies for basic immutable object generation:

- [org.immutables:value:{{v}}]({{ depUri }}|value|{{ v }}|jar)
  + Compile-only annotation processing tool. All in one artifact: annotations, processor with properly repackaged embedded dependencies.

Snippet of maven dependencies:

```xml
<dependency>
  <groupId>org.immutables</groupId>
  <artifactId>value</artifactId>
  <version>{{ v }}</version>
  <scope>provided</scope>
</dependency>
```

In maven you can declare it "provided" scope, or make it "optional" to prevent propagation of this artifact to runtime, effectively making it compile-only dependency.

_Immutables_ annotation processor runs under any Java build tool that uses `javac` as compiler backend (given annotation processing is not disabled in build tool configuration).
_Eclipse JDT compiler_ (ECJ) also supports this annotation processor. See [Using annotation processor in IDE](/apt.html).

**Note:** There's known issue with Javac incremental compilation and annotation processing, which appeared some time ago. Build tools like Maven are also affected by this bug. Most often commands like `mvn clean compile` will resolve any such problems by forcing full build. Disabling incremental compilation is also an option.

```xml
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>3.3</version>
  <configuration>
    <compilerVersion>1.8</compilerVersion>
    <source>1.8</source>
    <target>1.8</target>
    <!-- prevents endPosTable exception for maven compile -->
    <useIncrementalCompilation>false</useIncrementalCompilation>
  </configuration>
</plugin>
```
Search phrase: ["java.lang.IllegalStateException: endPosTable already set"](https://www.google.com/search?q=java.lang.IllegalStateException%3A+endPosTable+already+set)

## Create immutable object

Assuming that required dependencies were added, create a abstract class with abstract accessor methods. You can do the same by annotating with interfaces or even annotations (`@interface`)

```java
package info.sample;

import java.util.List;
import java.util.Set;
import org.immutables.value.Value;

@Value.Immutable
public abstract class FoobarValue {
  public abstract int foo();
  public abstract String bar();
  public abstract List<Integer> buz();
  public abstract Set<Long> crux();
}
```

After this moment you can compile and use generated immutable implementation.

```java
package info.sample;

import java.util.List;

public class FoobarValueMain {
  public static void main(String... args) {
    FoobarValue value = ImmutableFoobarValue.builder()
        .foo(2)
        .bar("Bar")
        .addBuz(1, 3, 4)
        .build(); // FoobarValue{foo=2, bar=Bar, buz=[1, 3, 4], crux={}}

    int foo = value.foo(); // 2

    List<Integer> buz = value.buz(); // ImmutableList.of(1, 3, 4)
  }
}
```
Congratulations! Done!
See sample [generated code](/generated.html) for an example of what kind of code is being generated by processor.

Even basic immutable class generation has a lot more tricks to show, check out the [guide](/immutable.html)!

<a href="/immutable.html" class="btn btn-default btn-lg">Read guide...</a>

<a name="android"></a>
### Configuration for Android
To comfortably use _Immutables_ for Android development, here are the steps for to setup working build configuration:

#### Using apt plugin

An annotation processor plugin should be configured for Android build. Although _Immutables_ annotation processing works with Javac without specific configuration, the work of a plugin is to ensure that output directories, dependency scopes and other miscellaneous details are being setup correctly. We found the 'android-apt' plugin works well for this, including interaction with Android Studio.

```javascript
buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath "com.android.tools.build:gradle:1.2.3"
    // add dependency to plugin
    classpath "com.neenbedankt.gradle.plugins:android-apt:1.6"
  }
}
// ...
```

Then use `apply plugin: 'android-apt'` in modules to apply plugin.

#### Adding Immutables dependencies

Immutables annotation processor should be added to the special `apt` scope (declared by android-apt plugin) and to the compile only `provided` scope (declared by android gradle plugins).

```javascript
apply plugin: "com.android.application"
apply plugin: "android-apt"
// ...
dependencies {
  compile fileTree(dir: "libs", include: ["*.jar"])
  apt "org.immutables:value:{{v}}" // <-- for annotation processor
  provided "org.immutables:value:{{v}}" // <-- for annotation API
}
```

Other compile-only dependencies applicable to android should be just added in provided scope. Jars with annotations such as [org.immutables:builder:{{v}}]({{ depUri }}|builder|{{ v }}|jar) (see [Factory Builders](factory.html)) or [org.immutables:gson:{{v}}]({{ depUri }}|gson|{{ v }}|jar) (see [GSON support](json.html#gson)) don't have to be propagated to an Android application, especially if there are no runtime classes needed; for example `gson` module provides optional runtime classes which are not suited for Android apps.

```javascript
dependencies {
  // ...
  apt "org.immutables:value:{{v}}" // for annotation processor
  provided "org.immutables:value:{{v}}" // for annotations
  provided "org.immutables:builder:{{v}}" // for annotations
  provided "org.immutables:gson:{{v}}" // for annotations
}
```

Since version `2.0.19` for some combined annotation and runtime artifacts, there are separate annotation-only artifact available. For example, `value`
and `gson` module have such artifact with `annotations` classifier. This a reduces dependencies and
avoid lint warnings about using certain types that are not available on Android (despite not being
required at runtime). So above example with dependencies could be rewritten as

```javascript
dependencies {
  // ...
  apt "org.immutables:value:{{v}}" // for annotation processor
  provided "org.immutables:value:{{v}}:annotations" // annotation-only artifact
  provided "org.immutables:builder:{{v}}" // there are only annotations anyway
  provided "org.immutables:gson:{{v}}:annotations" // annotation-only artifact
}
```

<a href="/immutable.html" class="btn btn-default btn-lg">Read guide...</a>
